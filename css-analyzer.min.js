/* CSS Analyzer - v1.0.0 - 2013-04-24 - Utility for CSS.
* https://github.com/codler/CSS-Analyzer
* Copyright (c) 2013 Han Lin Yap http://yap.nu; MIT license */
(function(){var g=document.styleSheets;var e=[];var a=[];var d=/(^|\s)(?:\w+)/g;var f=/\.[\w\d_-]+/g;var c=/#[\w\d_-]+/g;var b=CSSAnalyzer={specificity:function(h){var j=h.match(d);var l=j?j.length:0;j=h.match(f);var k=j?j.length:0;j=h.match(c);var i=j?j.length:0;return l+10*k+100*i},sortSpecificity:function(i,h){if(i.specificity<h.specificity){return -1}else{if(i.specificity>h.specificity){return 1}else{return 0}}},each:function(i,j){for(var h in i){if(i.hasOwnProperty(h)){j.call(i,h,i[h])}}},indexOf:function(m,k){if(m==null){return -1}var j=0,h=m.length;for(;j<h;j++){if(m[j]===k){return j}}return -1},trim:function(h){return(h==null)?"":"".trim.call(h)},clean:function(h){if(typeof h!=="string"){return""}h=h.replace(/\/\*((?:[^\*]|\*[^\/])*)\*\//g,"");h=h.replace(/\n/g,"");h=h.replace(/\r/g,"");h=h.replace(/\@import[^;]*;/g,"");return h},textToObj:function(p){p=b.clean(p);var k=p.split(/({[^{}]*})/);if(k[k.length-1].indexOf("}")==-1){k.pop()}var l=[];var h=false;var q;var n=0;var o;var m=0;while(m<k.length){if(m%2===0){var j=b.trim(k[m]);if(h){if(j.indexOf("}")!=-1){j=j.substr(1);k[m]=j;o=k.splice(n,m-n);o.shift();o.unshift(q[1]);l[l.length-1].attributes=b.textToObj(o.join(""));h=false;m=n;continue}}else{if(j.indexOf("{")!=-1){q=j.split("{");j=b.trim(q[0]);h=true;n=m}if(j!==""){l.push({selector:j})}}}else{if(!h){l[l.length-1].attributes=b.textAttrToObj(k[m].substr(1,k[m].length-2))}}m++}return l},textAttrToObj:function(p){p=b.clean(p);if(!p){return{}}var m;p=p.replace(/url\(([^)]+)\)/g,function(i){return i.replace(/;/g,"[CSSAnalyzer]")});m=p.split(/(:[^;]*;?)/);m.pop();var k={};for(var j=0,h=m.length;j<h;j++){if(j%2==1){var o=b.trim(m[j-1]);var n=m[j];k[o]=b.trim(n.substr(1).replace(";","").replace(/url\(([^)]+)\)/g,function(i){return i.replace(/\[CSSAnalyzer\]/g,";")}))}}return k},objToText:function(j,i,h){var k="";i=i||false;h=h||1;j.forEach(function(l){if(i){k+=Array(h).join("  ")}k+=l.selector+"{";if(Array.isArray(l.attributes)){if(i){k+="\r\n"+Array(h).join("  ")}k+=b.objToText(l.attributes,i,h+1)}else{b.each(l.attributes,function(n,m){if(i){k+="\r\n"+Array(h+1).join("  ")}k+=n+":"+m+";"});if(i){k+="\r\n"+Array(h).join("  ")}}k+="}";if(i){k+="\r\n"}});return k},objToTextAttr:function(j,i,h){var k="";i=i||false;h=h||1;b.each(j,function(m,l){if(i){k+="\r\n"+Array(h+1).join("  ")}k+=m+":"+l+";"});return k},findDefinedSelectors:function(m){var l;if((l=e.indexOf(m))!==-1){return a[l].slice(0)}var k=[];for(var h=0,j=g.length;h<j;h++){var p=g[h].cssRules;if(p){for(var l=0,o=p.length;l<o;l++){try{if(b.indexOf(document.querySelectorAll(p[l].selectorText),m)!==-1){k.push({selector:p[l].selectorText,specificity:b.specificity(p[l].selectorText)})}}catch(n){}}}}k.sort(b.sortSpecificity);e.push(m);a.push(k);return k.slice(0)}}})();